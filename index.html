<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Grattis!</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

    body {
      background: linear-gradient(135deg, #181d27 0%, #2b2d42 100%);
      min-height: 100vh;
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: 'Press Start 2P', monospace;
      color: #00FFCC;
      overflow: hidden;
      position: relative;
    }
    .pixel-bg {
      display: none; /* Hide pixel grid for a cleaner look */
    }

    .container {
      position: relative;
      z-index: 1;
      background: linear-gradient(145deg, #232946 60%, #121629 100%);
      padding: 2.5em 3em 2em 3em;
      border-radius: 18px;
      border: 4px solid #00ffd9;
      box-shadow: 0 12px 32px #000a, 0 2px 8px #00ffd9cc, 0 0 0 8px #232946 inset;
      outline: none;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h1 {
      font-size: 1.7em;
      text-align: center;
      margin: 0 0 1.2em 0;
      text-shadow: 0 2px 0 #00ffd9, 0 4px 0 #181d27, 0 0 16px #00ffd9, 2px 2px 0 #fff600;
    }

    #buttons {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 1em;
      margin-top: 1.2em;
    }

    button {
      background-color: #007777;
      color: #00FFCC;
      border: none;
      padding: 10px 20px;
      border-radius: 10px;
      cursor: pointer;
      font-family: 'Press Start 2P', monospace;
      font-size: 1em;
      margin-top: 1em;
      display: block;
      width: 100%;
      text-align: center;
      text-shadow: 0 0 6px #00ffcc, 0 0 12px #00ffaa;
      transition: background-color 0.3s, transform 0.3s;
    }

    button:hover {
      background-color: #00FFCC;
      color: #007777;
      transform: scale(1.05);
    }

    .song-btn {
      font-family: 'Press Start 2P', monospace;
      font-size: 1em;
      background: linear-gradient(145deg, #232946 60%, #181d27 100%);
      color: #fff600;
      border: 3px solid #00ffd9;
      border-radius: 10px;
      box-shadow: 0 6px 0 #181d27, 0 12px 24px #000a, 0 0 8px #00ffd9cc;
      margin: 0;
      padding: 1em 2em 1.2em 2em;
      cursor: pointer;
      text-shadow: 0 2px 0 #00ffd9, 0 4px 0 #181d27, 0 0 8px #00ffd9;
      transition: background 0.2s, transform 0.1s, box-shadow 0.2s;
      outline: none;
      min-width: 140px;
      position: relative;
    }
    .song-btn:active {
      background: #00FFCC;
      color: #181d27;
      transform: translateY(4px) scale(0.98);
      box-shadow: 0 2px 0 #181d27, 0 4px 8px #00ffd9cc;
    }
    .song-btn:hover {
      background: linear-gradient(145deg, #00ffd9 60%, #fff600 100%);
      color: #232946;
      filter: contrast(1.2) brightness(1.1);
      text-shadow: 0 2px 0 #fff, 0 4px 0 #00ffd9;
      box-shadow: 0 2px 0 #181d27, 0 0 24px #fff600, 0 0 8px #00ffd9cc;
      transform: translateY(-2px) scale(1.04);
    }

    .stop-btn {
      font-family: 'Press Start 2P', monospace;
      font-size: 1em;
      background: linear-gradient(90deg, #ff0055 0%, #fff600 100%);
      color: #232946;
      border: 3px solid #ff0055;
      border-radius: 10px;
      box-shadow: 0 4px 0 #181d27, 0 0 8px #ff0055cc;
      margin: 1.5em auto 0 auto;
      padding: 1em 2em;
      cursor: pointer;
      text-shadow: 1px 1px 0 #fff, 2px 2px 0 #ff0055;
      transition: background 0.2s, transform 0.1s, box-shadow 0.2s;
      outline: none;
      display: block;
      min-width: 120px;
    }
    .stop-btn:active {
      background: #ff0055;
      color: #fff600;
      transform: scale(0.97);
      box-shadow: 0 2px 0 #181d27, 0 0 8px #ff0055cc;
    }
    .stop-btn:hover {
      background: #fff600;
      color: #ff0055;
      box-shadow: 0 0 16px #fff600, 0 0 8px #ff0055cc;
    }

    .corner {
      position: absolute;
      bottom: 10px;
      right: 20px;
      font-size: 0.75em;
      color: #7fffd4b0;
      opacity: 0.4;
      font-family: monospace;
      z-index: 2;
    }

    #nintendo-dude-wrapper {
      position: fixed;
      left: 0;
      bottom: 8vw;
      width: 120px;
      height: 240px;
      z-index: 9999;
      pointer-events: none;
      animation: walk-dude 8s linear infinite alternate;
      transition: bottom 0.2s cubic-bezier(.7,-0.5,.7,1.5);
    }
    @media (max-width: 600px) {
      #nintendo-dude-wrapper {
        bottom: 18vw;
      }
    }
    .jumping {
      transition: bottom 0.18s cubic-bezier(.7,-0.5,.7,1.5);
      bottom: 180px !important;
    }
    .falling {
      transition: bottom 1.2s cubic-bezier(.2,0,.4,1.2);
      bottom: 18px !important;
    }
    .nintendo-dude {
      width: 120px;
      height: 240px;
      image-rendering: pixelated;
      display: block;
      z-index: 9999;
    }
    @keyframes walk-dude {
      0% { left: 0; }
      100% { left: calc(100vw - 120px); }
    }
    @keyframes jump-dude {
      0% { bottom: 18px; }
      20% { bottom: 120px; }
      60% { bottom: 120px; }
      100% { bottom: 18px; }
    }
  </style>
</head>
<body>
  <div class="pixel-bg"></div>
  <div class="container">
    <h1>Grattis med Konfirmasjon!</h1>
    <div id="buttons"></div>
    <button id="stopBtn" class="stop-btn">Staph</button>
  </div>
  <div class="corner">tilludvig &copy; 2025</div>
  <div id="nintendo-dude-wrapper">
    <img id="nintendoDude" class="nintendo-dude" src="nintendo-dude-sprite1.svg" alt="Nintendo Dude">
  </div>

  <!-- Play local audio file once on page load -->
<audio id="chiptune">
  <source id="audioSource" src="" type="audio/mpeg">
  Your browser does not support the audio element.
</audio>
  <script>
    const audio = document.getElementById('chiptune');
    audio.volume = 1.00;
    const audioSource = document.getElementById('audioSource');
    const songs = [
      "BÃ¥l.mp3",      
      "Vennebyen.mp3",
      "green.mp3"
    ];
    const buttonsDiv = document.getElementById('buttons');
    songs.forEach((song, i) => {
      const btn = document.createElement('button');
      btn.textContent = song.replace('.mp3', '');
      btn.className = 'song-btn';
      btn.onclick = () => {
        audioSource.src = `audio/${song}`;
        audio.load();
        audio.play();
        setWalking(true);
      };
      buttonsDiv.appendChild(btn);
    });

    // Animate Nintendo dude by swapping between four SVG sprite images
    const dudeImg = document.getElementById('nintendoDude');
    const dudeSprites = [
      'nintendo-dude-sprite1.svg',
      'nintendo-dude-sprite2.svg',
      'nintendo-dude-sprite3.svg',
      'nintendo-dude-sprite4.svg'
    ];
    let dudeFrame = 0;
    setInterval(() => {
      dudeImg.src = dudeSprites[dudeFrame];
      dudeFrame = (dudeFrame + 1) % 4;
    }, 180);

    // Get the wrapper for jumping (ensure this is before any function that uses it)
    const dudeWrapper = document.getElementById('nintendo-dude-wrapper');

    // Physics jump: fast up, slow fall
    function triggerJumpPhysics() {
      if (!dudeWrapper.classList.contains('jumping') && !dudeWrapper.classList.contains('falling')) {
        dudeWrapper.classList.add('jumping');
        setTimeout(() => {
          dudeWrapper.classList.remove('jumping');
          dudeWrapper.classList.add('falling');
          setTimeout(() => {
            dudeWrapper.classList.remove('falling');
          }, 1200);
        }, 180);
      }
    }
    // Random jump
    function randomJump() {
      triggerJumpPhysics();
      setTimeout(randomJump, 3000 + Math.random() * 4000);
    }
    setTimeout(randomJump, 2000 + Math.random() * 2000);
    // Click background to jump
    document.body.addEventListener('click', function(e) {
      if (e.target === document.body || e.target.classList.contains('pixel-bg')) {
        triggerJumpPhysics();
      }
    });
    // Start/stop walking animation only when music plays
    function setWalking(active) {
      if (active) {
        dudeWrapper.style.animationPlayState = '';
      } else {
        dudeWrapper.style.animationPlayState = 'paused';
      }
    }
    setWalking(false); // Start paused
    audio.addEventListener('play', () => setWalking(true));
    audio.addEventListener('pause', () => setWalking(false));
    // Stop music when clicking the dude
    dudeImg.addEventListener('click', function(e) {
      audio.pause();
      audio.currentTime = 0;
      setWalking(false);
      e.stopPropagation(); // Prevent triggering jump
    });
    // Stop playback when 'Staph' button is clicked
    document.getElementById('stopBtn').addEventListener('click', function(e) {
      audio.pause();
      audio.currentTime = 0;
      setWalking(false);
    });
  </script>
</body>
</html>
